# java-explore-with-me
Сервис для работы с событиями.

Pull-request link   on main part:   https://github.com/kirillkormilcev/java-explore-with-me/pull/1
                    on feature:     https://github.com/kirillkormilcev/java-explore-with-me/pull/2

<h3>Идея</h3>
<div class="paragraph">Свободное время — ценный ресурс. Ежедневно мы планируем, как его потратить — куда и с кем сходить. Сложнее всего в таком планировании поиск информации и переговоры. Какие намечаются мероприятия, свободны ли в этот момент друзья, как всех пригласить и где собраться. Приложение, которое вы будете создавать, — афиша, где можно предложить какое-либо событие от выставки до похода в кино и набрать компанию для участия в нём.</div>
<h3>Два сервиса</h3>
<div class="paragraph">Вам требуется создать два сервиса.</div>
<ol start="1"><li>Основной сервис — содержит всё необходимое для работы продукта.</li><li>Сервис статистики — хранит количество просмотров и позволяет делать различные выборки для анализа работы приложения.</li></ol>
<h3>Основной сервис</h3>
<div class="paragraph">API основного сервиса разделите на три части. Первая — публичная, доступна без регистрации любому пользователю сети. Вторая — закрытая, доступна только авторизованным пользователям. Третья — административная, для администраторов сервиса. К каждой из частей свои требования. </div>
<h3>Требования к публичному API</h3>
<div class="paragraph">Публичный API должен предоставлять возможности поиска и фильтрации событий.</div>
<ol start="1"><li>Сортировка списка событий должна быть организована либо по количеству просмотров, которое должно запрашиваться в сервисе статистики, либо по датам событий.</li><li>При просмотре списка событий возвращается только краткая информация о мероприятиях.</li><li>Просмотр подробной информации о конкретном событии нужно настроить отдельно (через отдельный эндпоинт).</li><li>Каждое событие должно относиться к какой-то из закреплённых в приложении категорий.</li><li>Должна быть настроена возможность получения всех имеющихся категорий и подборок событий (такие подборки будут составлять администраторы ресурса).</li><li>Каждый публичный запрос для получения списка событий или полной информации о мероприятии должен фиксироваться сервисом статистики.</li></ol>
<section class="theory-viewer__block theory-viewer__block_type_markdown"><div class="Markdown base-markdown base-markdown_with-gallery markdown markdown_size_normal markdown_type_theory full-markdown"><h3>Требования к API для авторизованных пользователей</h3><div class="paragraph">Закрытая часть API призвана реализовать возможности зарегистрированных пользователей продукта. </div><ol start="1"><li>Авторизованные пользователи должны иметь возможность добавлять в приложение новые мероприятия, редактировать их и просматривать после добавления.</li><li>Должна быть настроена подача заявок на участие в интересующих мероприятиях.</li><li>Создатель мероприятия должен иметь возможность подтверждать заявки, которые отправили другие пользователи сервиса.</li></ol><h3>Требования к API для администратора</h3><div class="paragraph">Административная часть API должна предоставлять возможности настройки и поддержки работы сервиса. </div><ol start="1"><li>Нужно настроить добавление, изменение и удаление категорий для событий.</li><li>Должна появиться возможность добавлять, удалять и закреплять на главной странице подборки мероприятий.</li><li>Требуется наладить модерацию событий, размещённых пользователями, — публикация или отклонение.</li><li>Также должно быть настроено управление пользователями — добавление, просмотр и удаление.</li></ol><h3>Сервис статистики</h3><div class="paragraph">Второй сервис, статистики, призван собирать информацию. Во-первых, о количестве обращений пользователей к спискам событий и, во-вторых, о количестве запросов к подробной информации о событии. На основе этой информации должна формироваться статистика о работе приложения.</div></div></section>
<section class="theory-viewer__block theory-viewer__block_type_markdown"><div class="Markdown base-markdown base-markdown_with-gallery markdown markdown_size_normal markdown_type_theory full-markdown"><div class="paragraph">Функционал сервиса статистики должен содержать:</div><ul><li>запись информации о том, что был обработан запрос к эндпоинту API;</li><li>предоставление статистики за выбранные даты по выбранному эндпоинту.</li></ul><div class="paragraph">Чтобы можно было использовать сервис статистики, нужно разработать HTTP-клиент. Он будет отправлять запросы и обрабатывать ответы. Можно использовать HTTP-клиент, который <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html" target="_blank">входит в состав JDK</a>, или RestTemplate, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html" target="_blank">входящий в состав Spring Framework</a>.</div><h3>Модель данных</h3><div class="paragraph">Жизненный цикл события должен включать несколько этапов. </div><ol start="1"><li>Создание.</li><li>Ожидание публикации. В статус ожидания публикации событие переходит сразу после создания.</li><li>Публикация. В это состояние событие переводит администратор.</li><li>Отмена публикации. В это состояние событие переходит в двух случаях. Первый — если администратор решил, что его нельзя публиковать. Второй — когда инициатор события решил отменить его на этапе ожидания публикации.</li></ol><div class="quiz-task" style="--quiz-task-background:#f5f6f7;"><div class="Markdown base-markdown base-markdown_with-gallery base-markdown markdown markdown_size_normal markdown_type_theory quiz-task__content"><div class="paragraph">➡️ <strong>Аутентификация и авторизация</strong><br>Оба сервиса <code class="code-inline code-inline_theme_light">ExploreWithMe</code> работают за VPN. С внешним миром их связывает гейтвей. Он контактирует с системой аутентификации и авторизации, а затем перенаправляет запрос в сервисы. То есть, если гейтвей пропустил запрос к закрытой или административной части API, значит этот запрос успешно прошел аутентификацию и авторизацию.</div></div></div>
<h3>Спецификация API</h3>
<div class="paragraph">Для обоих сервисов мы разработали подробную спецификацию API. </div>
<ol start="1"><li>спецификация основного сервиса: <a href="https://raw.githubusercontent.com/yandex-praktikum/java-explore-with-me/main/ewm-main-service-spec.json" target="_blank">ewm-main-service-spec.json</a></li><li>спецификация сервиса статистики: <a href="https://raw.githubusercontent.com/yandex-praktikum/java-explore-with-me/main/ewm-stats-service-spec.json" target="_blank">ewm-stats-service.json</a></li></ol>
<h3>Feature</h3>
<div class="paragraph">Возможность для администратора добавлять конкретные локации — города, театры, концертные залы и другие в виде координат (широта, долгота, радиус). Получение списка этих локаций. Возможность поиска событий в конкретной локации.</div></div></section>
